"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _parsers = _interopRequireDefault(require("./parsers.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const genDiff = (pathToFile1, pathToFile2) => {
  const data1 = (0, _parsers.default)(pathToFile1);
  const data2 = (0, _parsers.default)(pathToFile2);
  const data1keys = Object.keys(data1);
  const data2keys = Object.keys(data2);
  const dataKeys = Object.keys({ ...data1,
    ...data2
  });

  const add = (acc, key) => {
    if (data1keys.includes(key) && data2keys.includes(key)) {
      return data1[key] === data2[key] ? [...acc, `    ${key}: ${data1[key]}`] : [...acc, `  + ${key}: ${data2[key]}`, `  - ${key}: ${data1[key]}`];
    }

    return data1keys.includes(key) ? [...acc, `  - ${key}: ${data1[key]}`] : [...acc, `  + ${key}: ${data2[key]}`];
  };

  const result = dataKeys.reduce(add, []);
  return `{\n${result.join('\n')}\n}`;
};

module.exports = genDiff;
var _default = genDiff;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnZW5EaWZmIiwicGF0aFRvRmlsZTEiLCJwYXRoVG9GaWxlMiIsImRhdGExIiwiZGF0YTIiLCJkYXRhMWtleXMiLCJPYmplY3QiLCJrZXlzIiwiZGF0YTJrZXlzIiwiZGF0YUtleXMiLCJhZGQiLCJhY2MiLCJrZXkiLCJpbmNsdWRlcyIsInJlc3VsdCIsInJlZHVjZSIsImpvaW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxPQUFPLEdBQUcsQ0FBQ0MsV0FBRCxFQUFjQyxXQUFkLEtBQThCO0FBQzVDLFFBQU1DLEtBQUssR0FBRyxzQkFBTUYsV0FBTixDQUFkO0FBQ0EsUUFBTUcsS0FBSyxHQUFHLHNCQUFNRixXQUFOLENBQWQ7QUFDQSxRQUFNRyxTQUFTLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZSixLQUFaLENBQWxCO0FBQ0EsUUFBTUssU0FBUyxHQUFHRixNQUFNLENBQUNDLElBQVAsQ0FBWUgsS0FBWixDQUFsQjtBQUNBLFFBQU1LLFFBQVEsR0FBR0gsTUFBTSxDQUFDQyxJQUFQLENBQVksRUFBRSxHQUFHSixLQUFMO0FBQVksT0FBR0M7QUFBZixHQUFaLENBQWpCOztBQUNBLFFBQU1NLEdBQUcsR0FBRyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUN4QixRQUFJUCxTQUFTLENBQUNRLFFBQVYsQ0FBbUJELEdBQW5CLEtBQTJCSixTQUFTLENBQUNLLFFBQVYsQ0FBbUJELEdBQW5CLENBQS9CLEVBQXdEO0FBQ3RELGFBQU9ULEtBQUssQ0FBQ1MsR0FBRCxDQUFMLEtBQWVSLEtBQUssQ0FBQ1EsR0FBRCxDQUFwQixHQUNILENBQUMsR0FBR0QsR0FBSixFQUFVLE9BQU1DLEdBQUksS0FBSVQsS0FBSyxDQUFDUyxHQUFELENBQU0sRUFBbkMsQ0FERyxHQUVILENBQUMsR0FBR0QsR0FBSixFQUFVLE9BQU1DLEdBQUksS0FBSVIsS0FBSyxDQUFDUSxHQUFELENBQU0sRUFBbkMsRUFBdUMsT0FBTUEsR0FBSSxLQUFJVCxLQUFLLENBQUNTLEdBQUQsQ0FBTSxFQUFoRSxDQUZKO0FBR0Q7O0FBQ0QsV0FBT1AsU0FBUyxDQUFDUSxRQUFWLENBQW1CRCxHQUFuQixJQUNILENBQUMsR0FBR0QsR0FBSixFQUFVLE9BQU1DLEdBQUksS0FBSVQsS0FBSyxDQUFDUyxHQUFELENBQU0sRUFBbkMsQ0FERyxHQUVILENBQUMsR0FBR0QsR0FBSixFQUFVLE9BQU1DLEdBQUksS0FBSVIsS0FBSyxDQUFDUSxHQUFELENBQU0sRUFBbkMsQ0FGSjtBQUdELEdBVEQ7O0FBVUEsUUFBTUUsTUFBTSxHQUFHTCxRQUFRLENBQUNNLE1BQVQsQ0FBZ0JMLEdBQWhCLEVBQXFCLEVBQXJCLENBQWY7QUFDQSxTQUFRLE1BQUtJLE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLElBQVosQ0FBa0IsS0FBL0I7QUFDRCxDQWxCRDs7QUFvQkFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxCLE9BQWpCO2VBRWVBLE8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFyc2UgZnJvbSAnLi9wYXJzZXJzLmpzJztcblxuY29uc3QgZ2VuRGlmZiA9IChwYXRoVG9GaWxlMSwgcGF0aFRvRmlsZTIpID0+IHtcbiAgY29uc3QgZGF0YTEgPSBwYXJzZShwYXRoVG9GaWxlMSk7XG4gIGNvbnN0IGRhdGEyID0gcGFyc2UocGF0aFRvRmlsZTIpO1xuICBjb25zdCBkYXRhMWtleXMgPSBPYmplY3Qua2V5cyhkYXRhMSk7XG4gIGNvbnN0IGRhdGEya2V5cyA9IE9iamVjdC5rZXlzKGRhdGEyKTtcbiAgY29uc3QgZGF0YUtleXMgPSBPYmplY3Qua2V5cyh7IC4uLmRhdGExLCAuLi5kYXRhMiB9KTtcbiAgY29uc3QgYWRkID0gKGFjYywga2V5KSA9PiB7XG4gICAgaWYgKGRhdGExa2V5cy5pbmNsdWRlcyhrZXkpICYmIGRhdGEya2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICByZXR1cm4gZGF0YTFba2V5XSA9PT0gZGF0YTJba2V5XVxuICAgICAgICA/IFsuLi5hY2MsIGAgICAgJHtrZXl9OiAke2RhdGExW2tleV19YF1cbiAgICAgICAgOiBbLi4uYWNjLCBgICArICR7a2V5fTogJHtkYXRhMltrZXldfWAsIGAgIC0gJHtrZXl9OiAke2RhdGExW2tleV19YF07XG4gICAgfVxuICAgIHJldHVybiBkYXRhMWtleXMuaW5jbHVkZXMoa2V5KVxuICAgICAgPyBbLi4uYWNjLCBgICAtICR7a2V5fTogJHtkYXRhMVtrZXldfWBdXG4gICAgICA6IFsuLi5hY2MsIGAgICsgJHtrZXl9OiAke2RhdGEyW2tleV19YF07XG4gIH07XG4gIGNvbnN0IHJlc3VsdCA9IGRhdGFLZXlzLnJlZHVjZShhZGQsIFtdKTtcbiAgcmV0dXJuIGB7XFxuJHtyZXN1bHQuam9pbignXFxuJyl9XFxufWA7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdlbkRpZmY7XG5cbmV4cG9ydCBkZWZhdWx0IGdlbkRpZmY7XG4iXX0=