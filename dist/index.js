"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _fs = _interopRequireDefault(require("fs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const genDiff = (pathToFile1, pathToFile2) => {
  const data1 = JSON.parse(_fs.default.readFileSync(pathToFile1, 'utf-8'));
  const data2 = JSON.parse(_fs.default.readFileSync(pathToFile2, 'utf-8'));
  const data1keys = Object.keys(data1);
  const data2keys = Object.keys(data2);
  const dataKeys = Object.keys({ ...data1,
    ...data2
  });

  const add = (acc, key) => {
    if (data1keys.includes(key) && data2keys.includes(key)) {
      return data1[key] === data2[key] ? [...acc, `    ${key}: ${data1[key]}`] : [...acc, `  + ${key}: ${data2[key]}`, `  - ${key}: ${data1[key]}`];
    }

    return data1keys.includes(key) ? [...acc, `  - ${key}: ${data1[key]}`] : [...acc, `  + ${key}: ${data2[key]}`];
  };

  const result = dataKeys.reduce(add, []);
  return `{\n${result.join('\n')}\n}`;
};

module.exports = genDiff;
var _default = genDiff;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnZW5EaWZmIiwicGF0aFRvRmlsZTEiLCJwYXRoVG9GaWxlMiIsImRhdGExIiwiSlNPTiIsInBhcnNlIiwiZnMiLCJyZWFkRmlsZVN5bmMiLCJkYXRhMiIsImRhdGExa2V5cyIsIk9iamVjdCIsImtleXMiLCJkYXRhMmtleXMiLCJkYXRhS2V5cyIsImFkZCIsImFjYyIsImtleSIsImluY2x1ZGVzIiwicmVzdWx0IiwicmVkdWNlIiwiam9pbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLE9BQU8sR0FBRyxDQUFDQyxXQUFELEVBQWNDLFdBQWQsS0FBOEI7QUFDNUMsUUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0MsWUFBR0MsWUFBSCxDQUFnQk4sV0FBaEIsRUFBNkIsT0FBN0IsQ0FBWCxDQUFkO0FBQ0EsUUFBTU8sS0FBSyxHQUFHSixJQUFJLENBQUNDLEtBQUwsQ0FBV0MsWUFBR0MsWUFBSCxDQUFnQkwsV0FBaEIsRUFBNkIsT0FBN0IsQ0FBWCxDQUFkO0FBQ0EsUUFBTU8sU0FBUyxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWVIsS0FBWixDQUFsQjtBQUNBLFFBQU1TLFNBQVMsR0FBR0YsTUFBTSxDQUFDQyxJQUFQLENBQVlILEtBQVosQ0FBbEI7QUFDQSxRQUFNSyxRQUFRLEdBQUdILE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLEVBQUUsR0FBR1IsS0FBTDtBQUFZLE9BQUdLO0FBQWYsR0FBWixDQUFqQjs7QUFDQSxRQUFNTSxHQUFHLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDeEIsUUFBSVAsU0FBUyxDQUFDUSxRQUFWLENBQW1CRCxHQUFuQixLQUEyQkosU0FBUyxDQUFDSyxRQUFWLENBQW1CRCxHQUFuQixDQUEvQixFQUF3RDtBQUN0RCxhQUFPYixLQUFLLENBQUNhLEdBQUQsQ0FBTCxLQUFlUixLQUFLLENBQUNRLEdBQUQsQ0FBcEIsR0FDSCxDQUFDLEdBQUdELEdBQUosRUFBVSxPQUFNQyxHQUFJLEtBQUliLEtBQUssQ0FBQ2EsR0FBRCxDQUFNLEVBQW5DLENBREcsR0FFSCxDQUFDLEdBQUdELEdBQUosRUFBVSxPQUFNQyxHQUFJLEtBQUlSLEtBQUssQ0FBQ1EsR0FBRCxDQUFNLEVBQW5DLEVBQXVDLE9BQU1BLEdBQUksS0FBSWIsS0FBSyxDQUFDYSxHQUFELENBQU0sRUFBaEUsQ0FGSjtBQUdEOztBQUNELFdBQU9QLFNBQVMsQ0FBQ1EsUUFBVixDQUFtQkQsR0FBbkIsSUFDSCxDQUFDLEdBQUdELEdBQUosRUFBVSxPQUFNQyxHQUFJLEtBQUliLEtBQUssQ0FBQ2EsR0FBRCxDQUFNLEVBQW5DLENBREcsR0FFSCxDQUFDLEdBQUdELEdBQUosRUFBVSxPQUFNQyxHQUFJLEtBQUlSLEtBQUssQ0FBQ1EsR0FBRCxDQUFNLEVBQW5DLENBRko7QUFHRCxHQVREOztBQVVBLFFBQU1FLE1BQU0sR0FBR0wsUUFBUSxDQUFDTSxNQUFULENBQWdCTCxHQUFoQixFQUFxQixFQUFyQixDQUFmO0FBQ0EsU0FBUSxNQUFLSSxNQUFNLENBQUNFLElBQVAsQ0FBWSxJQUFaLENBQWtCLEtBQS9CO0FBQ0QsQ0FsQkQ7O0FBb0JBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0QixPQUFqQjtlQUVlQSxPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcblxuY29uc3QgZ2VuRGlmZiA9IChwYXRoVG9GaWxlMSwgcGF0aFRvRmlsZTIpID0+IHtcbiAgY29uc3QgZGF0YTEgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoVG9GaWxlMSwgJ3V0Zi04JykpO1xuICBjb25zdCBkYXRhMiA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKHBhdGhUb0ZpbGUyLCAndXRmLTgnKSk7XG4gIGNvbnN0IGRhdGExa2V5cyA9IE9iamVjdC5rZXlzKGRhdGExKTtcbiAgY29uc3QgZGF0YTJrZXlzID0gT2JqZWN0LmtleXMoZGF0YTIpO1xuICBjb25zdCBkYXRhS2V5cyA9IE9iamVjdC5rZXlzKHsgLi4uZGF0YTEsIC4uLmRhdGEyIH0pO1xuICBjb25zdCBhZGQgPSAoYWNjLCBrZXkpID0+IHtcbiAgICBpZiAoZGF0YTFrZXlzLmluY2x1ZGVzKGtleSkgJiYgZGF0YTJrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIHJldHVybiBkYXRhMVtrZXldID09PSBkYXRhMltrZXldXG4gICAgICAgID8gWy4uLmFjYywgYCAgICAke2tleX06ICR7ZGF0YTFba2V5XX1gXVxuICAgICAgICA6IFsuLi5hY2MsIGAgICsgJHtrZXl9OiAke2RhdGEyW2tleV19YCwgYCAgLSAke2tleX06ICR7ZGF0YTFba2V5XX1gXTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGExa2V5cy5pbmNsdWRlcyhrZXkpXG4gICAgICA/IFsuLi5hY2MsIGAgIC0gJHtrZXl9OiAke2RhdGExW2tleV19YF1cbiAgICAgIDogWy4uLmFjYywgYCAgKyAke2tleX06ICR7ZGF0YTJba2V5XX1gXTtcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gZGF0YUtleXMucmVkdWNlKGFkZCwgW10pO1xuICByZXR1cm4gYHtcXG4ke3Jlc3VsdC5qb2luKCdcXG4nKX1cXG59YDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZ2VuRGlmZjtcblxuZXhwb3J0IGRlZmF1bHQgZ2VuRGlmZjtcbiJdfQ==